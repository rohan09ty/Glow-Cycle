# GlowCycle - Android Build Guide

## âœ… Completed Steps

### 1. Prerequisites Installed
- âœ… Java Development Kit (JDK) 17
- âœ… Android Studio with:
  - Android SDK
  - Android SDK Platform
  - Android Virtual Device (AVD)

### 2. Capacitor Setup
- âœ… Installed Capacitor Core and CLI
- âœ… Initialized Capacitor with app details:
  - **App Name**: GlowCycle
  - **App ID**: com.glowcycle.app
  - **Web Directory**: dist
- âœ… Installed Android platform
- âœ… Built the web app
- âœ… Added Android platform to the project

## ğŸ“ Project Structure

```
glow-cycle-main/
â”œâ”€â”€ android/                    # Native Android project (generated by Capacitor)
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â””â”€â”€ main/
â”‚   â”‚   â”‚       â”œâ”€â”€ assets/
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ public/  # Your web app files
â”‚   â”‚   â”‚       â”œâ”€â”€ AndroidManifest.xml
â”‚   â”‚   â”‚       â””â”€â”€ java/
â”‚   â”‚   â””â”€â”€ build.gradle
â”‚   â”œâ”€â”€ gradle/
â”‚   â””â”€â”€ build.gradle
â”œâ”€â”€ dist/                       # Built web app
â”œâ”€â”€ src/                        # Source code
â”œâ”€â”€ capacitor.config.ts         # Capacitor configuration
â””â”€â”€ package.json                # NPM scripts
```

## ğŸš€ Next Steps in Android Studio

### Step 1: Wait for Gradle Sync
When Android Studio opens, it will automatically:
1. Index the project files
2. Download necessary Gradle dependencies
3. Sync the project

**This may take 5-10 minutes on first launch.** Watch the bottom status bar for progress.

### Step 2: Configure Android SDK (if needed)
1. Go to **File â†’ Project Structure â†’ SDK Location**
2. Verify that Android SDK location is set (usually `C:\Users\YourName\AppData\Local\Android\Sdk`)
3. Click **OK**

### Step 3: Select a Device/Emulator
You have two options:

#### Option A: Use Android Emulator (Virtual Device)
1. Click the **Device Manager** icon (phone icon) in the top toolbar
2. Click **Create Device**
3. Select a device definition (e.g., Pixel 5)
4. Select a system image (e.g., Android 13 - API 33)
   - If not downloaded, click **Download** next to the system image
5. Click **Finish**

#### Option B: Use Physical Device
1. Enable **Developer Options** on your Android phone:
   - Go to Settings â†’ About Phone
   - Tap "Build Number" 7 times
2. Enable **USB Debugging**:
   - Go to Settings â†’ Developer Options
   - Enable "USB Debugging"
3. Connect your phone via USB
4. Accept the debugging prompt on your phone
5. Your device should appear in Android Studio's device dropdown

### Step 4: Run the App
1. Select your device/emulator from the device dropdown (top toolbar)
2. Click the **Run** button (green play icon) or press **Shift + F10**
3. Wait for the app to build and install
4. The app will launch automatically on your device/emulator

## ğŸ› ï¸ Useful NPM Scripts

Run these commands from the project root (`e:\Women\glow-cycle-main`):

```bash
# Build web app and sync with Android
npm run android:build

# Sync changes to Android (after making code changes)
npm run android:sync

# Open project in Android Studio
npm run android:open

# Run on connected device/emulator (alternative to Android Studio)
npm run android:run
```

## ğŸ”„ Development Workflow

### Making Changes to Your App

1. **Edit your React/TypeScript code** in the `src/` directory
2. **Build the web app**:
   ```bash
   npm run build
   ```
3. **Sync with Android**:
   ```bash
   npm run android:sync
   ```
   Or use the combined command:
   ```bash
   npm run android:build
   ```
4. **Run the app** in Android Studio or:
   ```bash
   npm run android:run
   ```

### Live Reload (Optional)
For faster development, you can enable live reload:

1. Start the Vite dev server:
   ```bash
   npm run dev
   ```
2. Find your computer's IP address:
   ```bash
   ipconfig
   ```
   Look for "IPv4 Address" (e.g., 192.168.1.100)

3. Edit `capacitor.config.ts`:
   ```typescript
   server: {
     url: 'http://YOUR_IP:5173',  // Replace YOUR_IP
     cleartext: true
   }
   ```
4. Sync and run:
   ```bash
   npm run android:sync
   npm run android:run
   ```

Now changes will reload automatically without rebuilding!

## ğŸ“± Building APK for Distribution

### Debug APK (for testing)
1. In Android Studio: **Build â†’ Build Bundle(s) / APK(s) â†’ Build APK(s)**
2. Wait for build to complete
3. Click **locate** in the notification to find the APK
4. Location: `android/app/build/outputs/apk/debug/app-debug.apk`

### Release APK (for production)

#### 1. Generate Signing Key
```bash
cd android/app
keytool -genkey -v -keystore glowcycle-release-key.keystore -alias glowcycle -keyalg RSA -keysize 2048 -validity 10000
```

Follow the prompts and **remember your passwords!**

#### 2. Configure Signing
Create `android/key.properties`:
```properties
storePassword=YOUR_KEYSTORE_PASSWORD
keyPassword=YOUR_KEY_PASSWORD
keyAlias=glowcycle
storeFile=glowcycle-release-key.keystore
```

âš ï¸ **Add to `.gitignore`**:
```
android/key.properties
android/app/*.keystore
```

#### 3. Update `android/app/build.gradle`
Add before `android {`:
```gradle
def keystoreProperties = new Properties()
def keystorePropertiesFile = rootProject.file('key.properties')
if (keystorePropertiesFile.exists()) {
    keystoreProperties.load(new FileInputStream(keystorePropertiesFile))
}
```

Add inside `android {`:
```gradle
signingConfigs {
    release {
        keyAlias keystoreProperties['keyAlias']
        keyPassword keystoreProperties['keyPassword']
        storeFile keystoreProperties['storeFile'] ? file(keystoreProperties['storeFile']) : null
        storePassword keystoreProperties['storePassword']
    }
}
buildTypes {
    release {
        signingConfig signingConfigs.release
        minifyEnabled false
        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
    }
}
```

#### 4. Build Release APK
In Android Studio: **Build â†’ Generate Signed Bundle / APK â†’ APK**
- Select your keystore
- Enter passwords
- Select "release" build variant
- Click **Finish**

Location: `android/app/build/outputs/apk/release/app-release.apk`

## ğŸ› Troubleshooting

### Gradle Build Failed
- **Solution**: File â†’ Invalidate Caches â†’ Invalidate and Restart

### Device Not Detected
- **Solution**: 
  - Check USB cable (use data cable, not charge-only)
  - Reinstall USB drivers
  - Try different USB port
  - Revoke and re-grant USB debugging authorization

### App Crashes on Launch
- **Solution**: Check Android Studio's Logcat for errors
  - View â†’ Tool Windows â†’ Logcat

### White Screen on Launch
- **Solution**: 
  1. Verify `dist/` folder has content: `npm run build`
  2. Sync: `npm run android:sync`
  3. Clear app data on device and reinstall

### Capacitor Plugin Errors
- **Solution**: 
  ```bash
  npx cap sync android
  ```

## ğŸ“š Additional Resources

- [Capacitor Documentation](https://capacitorjs.com/docs)
- [Capacitor Android Guide](https://capacitorjs.com/docs/android)
- [Android Developer Guide](https://developer.android.com/guide)
- [Vite Documentation](https://vitejs.dev/)

## ğŸ‰ Success Checklist

- [ ] Android Studio opened successfully
- [ ] Gradle sync completed without errors
- [ ] Device/Emulator is configured
- [ ] App runs on device/emulator
- [ ] Can make changes and see them reflected
- [ ] Debug APK builds successfully

---

**Current Status**: âœ… Android Studio should now be open with your project!

**Next Action**: Wait for Gradle sync to complete, then run the app using the steps above.
